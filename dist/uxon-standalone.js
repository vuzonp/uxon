!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.uxon=a.uxon||{})}(this,function(a){"use strict";function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function c(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}function d(a,b){return"string"==typeof a?(b||document).querySelector(a):null}function e(a,b){return[].slice.call((b||document).querySelectorAll(a))}function f(a){return a===z?!1:z.contains(a)}function g(a,b){"classList"in a?a.classList.add(b):a.className.baseVal+=" "+b}function h(a){return document.createElementNS(y.svg,a)}function i(a){return a.parentNode.removeChild(a)}function j(a){var b=null;if(!window.DOMParser)throw new G("DOMParser");var c=new DOMParser;b=c.parseFromString(a,"image/svg+xml");var e=d("parsererror",b);if(e&&e.length>0)throw new F(e.textContent);return b}function k(a){var b=/^https?:\/\/([^\/]+)\/|:/.exec(a);return b&&b[1]!==location.host}function l(a){var b=k(a);if(!b||"withCredentials"in XMLHttpRequest.prototype)return new V(a,b);if("undefined"!=typeof XDomainRequest)return new W(a);throw new G("XDomainRequest")}function m(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}function n(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return m(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(a){var b=typeof a,c="";return"string"===b||"number"===b?c+=a:"boolean"===b?c+=0|a:a&&(c=JSON.stringify(a)),c}function p(a,b,c){"remove"in a&&a.remove(),c["delete"](b)}function q(a,b){return Math.max(a,b)-Math.min(a,b)}function r(a,b,c){return a>=b&&c>=a}function s(a,b){this.min=parseInt(a),this.max=parseInt(b),isNaN(this.min)&&(this.min=-1),isNaN(this.max)&&(this.max=Number.MAX_VALUE)}function t(a,b,c){if(!b)return c;if(!c)return b;var d=b.sizeRange,e=c.sizeRange,f=q(a,(d[0]+d[1])/2),g=q(a,(e[0]+e[1])/2);return f===g?c.container.contains(b.container)?b:c:f>g?c:b}var u=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},v=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},w=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},x="http://www.w3.org/",y={svg:x+"2000/svg",xlink:x+"1999/xlink"},z=document.body,A=function(){var a=0,b=function(b){return b||(b="u_"),++a,b+a.toString(36)};return b}(),B=function(a){function b(a){w(this,b);var c=u(this,Object.getPrototypeOf(b).call(this,a));return c.name=c.constructor.name,c.message=a+"",c}return v(b,a),c(b,[{key:"toString",value:function(){return"[error][Uxôn → "+this.name+"] "+this.message}}]),b}(Error),C=function(a){function b(a){return w(this,b),u(this,Object.getPrototypeOf(b).call(this,a))}return v(b,a),b}(B),D=function(a){function b(a){return w(this,b),u(this,Object.getPrototypeOf(b).call(this,a))}return v(b,a),b}(C),E=function(a){function b(a,c){w(this,b);var d=c&&c.name?c.name:typeof c;return u(this,Object.getPrototypeOf(b).call(this,"Invalid DOM Element: `"+a+"` expected but `"+d+"` received."))}return v(b,a),b}(D),F=function(a){function b(a){return w(this,b),u(this,Object.getPrototypeOf(b).call(this,a))}return v(b,a),b}(C),G=function(a){function b(a,c){w(this,b);var d=c?a+":"+c+"()":a;return u(this,Object.getPrototypeOf(b).call(this,"Not Callable Function `"+d+"`"))}return v(b,a),b}(B),H=function(a){function b(a){return w(this,b),u(this,Object.getPrototypeOf(b).call(this,"The request could not be completed - status code received: "+a||"???"))}return v(b,a),b}(B),I=function(a){function b(a){return w(this,b),u(this,Object.getPrototypeOf(b).call(this,a))}return v(b,a),b}(B),J=function(a){throw a},K=function(){},L="Callback argument must be a function.",M="GET",N="image/svg+xml",O=new WeakMap,P=new WeakMap,Q=new WeakMap,R=new WeakMap,S=new WeakMap,T=new WeakMap,U=function(){function a(b){w(this,a),P.set(this,[]),Q.set(this,J),R.set(this,K),T.set(this,encodeURI(b)),Object.defineProperties(this,{request:{get:function(){return S.get(this)}},url:{get:function(){return T.get(this)}}})}return c(a,[{key:"addHeader",value:function(a,b){P.get(this).push([a+"",b+""])}},{key:"send",value:function(){throw new G("Loader","send")}},{key:"onerror",set:function(a){if("function"!=typeof a)throw new InvalidArgument(L);Q.set(this,a)},get:function(){return Q.get(this)}},{key:"onsuccess",set:function(a){if("function"!=typeof a)throw new InvalidArgument(L);R.set(this,a)},get:function(){return R.get(this)}}]),a}(),V=function(a){function b(a,c){w(this,b);var d=u(this,Object.getPrototypeOf(b).call(this,a)),e=new XMLHttpRequest;return e.open(M,d.url,!0),O.set(d,!!c),S.set(d,e),d}return v(b,a),c(b,[{key:"send",value:function(){function a(){c(new H(d.statusText))}var b=R.get(this),c=Q.get(this),d=this.request;this.addHeader("Content-Type",N),"overrideMimeType"in d&&d.overrideMimeType(N),O.get(this)||this.addHeader("X-Requested-With","XMLHttpRequest"),P.get(this).forEach(function(a){d.setRequestHeader(a[0],a[1])}),d.onload=function(){if(200===this.status)try{var e=null;if(e=this.responseXML&&this.responseXML.documentElement&&"overrideMimeType"in d?this.responseXML.documentElement:j(this.responseText),!e)throw new F;b(e)}catch(f){c(f)}else a()},d.onerror=a,d.ontimeout=a,d.send(null)}}]),b}(U),W=function(a){function b(a){w(this,b);var c=u(this,Object.getPrototypeOf(b).call(this,a)),d=new XDomainRequest;return d.open(c.method,c.url),O.set(c,!!cors),S.set(c,d),c}return v(b,a),c(b,[{key:"send",value:function(){function a(){c(new H(d.statusText))}var b=this.onSuccess,c=this.onError,d=this.request;d.onload=function(){try{var a=j(d.responseText);if(!a)throw new F;b(a)}catch(e){c(e)}},d.onerror=a,d.ontimeout=a}}]),b}(U),X=function(){function a(b,c){if(w(this,a),!b||1!==b.nodeType)throw new E("Element");this.element=b,this.prefix=c+"-"}return c(a,[{key:"has",value:function(a){return this.element.hasAttribute(this.prefix+a)}},{key:"get",value:function(a){return this.element.getAttribute(this.prefix+a)}},{key:"set",value:function(a,b){return this.element.setAttribute(this.prefix+a,o(b))}},{key:"remove",value:function(a){return this.element.removeAttribute(this.prefix+a)}}]),a}(),Y=function(a){function b(a){return w(this,b),u(this,Object.getPrototypeOf(b).call(this,a,"data"))}return v(b,a),b}(X),Z=function(a){function b(a){return w(this,b),u(this,Object.getPrototypeOf(b).call(this,a,"aria"))}return v(b,a),b}(X),$=function(){var a=h("svg");return a.setAttribute("aria-hidden","true"),a}(),_=function(){var a=h("use");return a}(),aa={icon:$,connector:_},ba=new WeakMap,ca=new WeakMap,da=new WeakMap,ea=new WeakMap,fa=new WeakMap,ga=new WeakMap,ha=function(){function a(b){if(w(this,a),!b.viewportElement)throw new E("A not `viewport` SVGElement");ba.set(this,b.ownerSVGElement),ca.set(this,b.transform.baseVal),da.set(this,b.viewportElement.viewBox.baseVal)}return c(a,[{key:"appendItem",value:function(){return ca.get(this).appendItem(ba.get(this).createSVGTransform())}},{key:"clear",value:function(){ca.get(this).clear()}},{key:"rotate",value:function(a,b,c){b=b||da.get(this).width/2,c=c||da.get(this).height/2,ea.has(this)||ea.set(this,this.appendItem());var d=ea.get(this);d.setRotate(a,b,c)}},{key:"flipX",value:function(){var a=-1*da.get(this).width,b=0,c=fa.has(this)?fa.get(this):fa.set(this,[this.appendItem(),this.appendItem()]).get(this);-1!==c[0].matrix.a?(c[0].setScale(-1,1),c[1].setTranslate(a,b)):(c[0].setScale(1,1),c[1].setTranslate(0,0))}},{key:"flipY",value:function(){var a=0,b=-1*da.get(this).height,c=ga.has(this)?ga.get(this):ga.set(this,[this.appendItem(),this.appendItem()]).get(this);-1!==c[0].matrix.d?(c[0].setScale(1,-1),c[1].setTranslate(a,b)):(c[0].setScale(1,1),c[1].setTranslate(0,0))}},{key:"translate",value:function(a,b){var c=ba.get(this).createSVGTransform();c.setTranslate(a,b),ca.get(this).appendItem(c)}},{key:"remove",value:function(){this.clear(),ba["delete"](this),ca["delete"](this),da["delete"](this)}}]),a}(),ia=function(a){function b(){return w(this,b),u(this,Object.getPrototypeOf(b).apply(this,arguments))}return v(b,a),c(b,[{key:"translate",value:function(a,b){var c=this.svgElement.style,d=c.transform||c.msTransform||c.webkitTransform||c.oTransform||"";d&&(d+=" "),d+="translate("+[a,b].join(",")+")",c.msTransform=d,c.oTransform=d,c.webkitTransform=d,c.transform=d}}]),b}(ha),ja=function(){function a(a){if(a.viewBox.baseVal){var b=a.viewBox.baseVal;return c.indexOf(a.tagName.toLowerCase())&&(0!==b.height||0!==b.width||0!==b.x||0!==b.y)}return!1}var b={x:0,y:0,width:0,height:0},c=["image","marker","pattern","svg","symbol","view"],d=function(c){for(var d=c;d;){if(a(d))return d.viewBox.baseVal;d=d.viewportElement}return b};return d}(),ka=new WeakMap,la=new WeakMap,ma=new WeakMap,na=new WeakMap,oa=function(){function a(b){if(w(this,a),!(b instanceof SVGElement))throw new E("SVGElement",b);ka.set(this,b),this.rename(b.id);var c=d(this.getIRI()+" > title:first-of-type",b.parentNode),e=d(this.getIRI()+" > desc:first-of-type",b.parentNode);c&&(c.id||(c.id=A(b.id+"-t")),ma.set(this,c.id)),e&&(e.id||(e.id=A(b.id+"-d")),na.set(this,e.id)),Object.defineProperties(this,{descID:{get:function(){return na.get(this)}},svgElement:{get:function(){return ka.get(this)}},titleID:{get:function(){return ma.get(this)}}})}return c(a,[{key:"getIRI",value:function(){return"#"+ka.get(this).id}},{key:"getViewBox",value:function(){return la.has(this)||la.set(this,ja(ka.get(this))),la.get(this)}},{key:"rename",value:function(a){ka.get(this).id=A("pict")+"-"+a}},{key:"remove",value:function(){i(ka.get(this)),ka["delete"](this),la["delete"](this),ma["delete"](this),na["delete"](this)}}]),a}(),pa=new WeakMap,qa=new WeakMap,ra=new WeakMap,sa=new WeakMap,ta=new WeakMap,ua=new WeakMap,va=new WeakMap,wa=function(){function a(b){if(w(this,a),!(b instanceof HTMLElement))throw new E("HTMLElement",b);var c=a.snippets.connector.cloneNode(),d=a.snippets.icon.cloneNode();b.setAttribute("role","img"),d.appendChild(c),pa.set(this,new Z(b)),qa.set(this,c),ra.set(this,b),sa.set(this,new Y(b)),ta.set(this,oa.replacement),ua.set(this,d),Object.defineProperties(this,{aria:{get:function(){return pa.get(this)}},connector:{get:function(){return qa.get(this)}},element:{get:function(){return ra.get(this)}},meta:{get:function(){return sa.get(this)}},pictogram:{get:function(){return ta.get(this)}},svgElement:{get:function(){return ua.get(this)}}})}return c(a,[{key:"applyTransforms",value:function(){if(this.meta.has("rotate"))this.transform().rotate(this.meta.get("rotate"));else if(this.meta.has("flip-x"))this.transform().flipX();else if(this.meta.has("flip-y"))this.transform().flipY();else if(this.meta.has("translate")){var a=this.meta.get("translate").split(",",2),b=n(a,2),c=b[0],d=b[1];this.transform().translate(c,d)}}},{key:"draw",value:function(a){if(!(a instanceof oa))throw new D("Invalid Pictogram");ta.set(this,a),this.element.appendChild(this.svgElement);var b=a.getViewBox(),c=[b.x,b.y,b.width,b.height].join(" ");this.svgElement.setAttribute("viewBox",c),a.titleID&&!this.aria.has("label")&&this.aria.set("labelledby",a.titleID),a.descID&&!this.aria.has("description")&&this.aria.set("descriptedby",a.descID),this.connector.setAttributeNS(y.xlink,"xlink:href",a.getIRI()),this.applyTransforms()}},{key:"remove",value:function(){for(var a=this.element;a.firstChild;)a.removeChild(a.firstChild);this.aria.remove("labelledby"),this.aria.remove("descriptedby"),pa["delete"](this),qa["delete"](this),ra["delete"](this),sa["delete"](this),ta["delete"](this),ua["delete"](this),va["delete"](this)}},{key:"getSize",value:function(){return this.svgElement.getBoundingClientRect()}},{key:"getRefSize",value:function(){var a=this.getSize();return Math.max(a.height,a.width)}},{key:"transform",value:function(){var a=va.get(this);if(!a){if(!this.svgElement)throw new I("Unable to transform a non-drawn icon.");a=new ia(this.connector),va.set(this,a)}return a}}]),a}();wa.snippets=aa;var xa=new WeakMap,ya=function(){function a(){w(this,a),xa.set(this,new WeakMap)}return c(a,[{key:"clear",value:function(){xa.get(this).forEach(p)}},{key:"delete",value:function(a){if(this.has(a)){var b=this.get(a);"remove"in b&&b.remove()}return xa.get(this)["delete"](a)}},{key:"get",value:function(a){return xa.get(this).get(a)}},{key:"has",value:function(a){return xa.get(this).has(a)}},{key:"set",value:function(a,b){return xa.get(this).set(a,b),this}}]),a}(),za=new WeakMap,Aa=new WeakMap,Ba=function(){function a(b){if(w(this,a),!(b instanceof SVGElement)||b.ownerSVGElement)throw new E("SVGElement",b);b.id=A("sprite")+b.id,b.setAttribute("aria-hidden",!0),b.removeAttribute("height"),b.removeAttribute("width"),g(b,"uxon"),g(b,"uxon-sprite"),f(b)||z.insertBefore(b,z.firstChild),za.set(this,new ya),Aa.set(this,b),Object.defineProperty(this,"svgElement",{get:function(){return Aa.get(this)}})}return c(a,[{key:"clone",value:function(){return new a(Aa.get(this).cloneNode(!0))}},{key:"findPictogram",value:function(a){return this.getPictogram(d("g[id$="+a+"],symbol[id$="+a+"]",Aa.get(this)))}},{key:"getPictogram",value:function(a){return a&&Aa.get(this).contains(a)?(za.get(this).has(a)||za.get(this).set(a,new oa(a)),za.get(this).get(a)):void 0}},{key:"removePictogram",value:function(a){za.get(this)["delete"](a.svgElement)}},{key:"remove",value:function(){i(Aa.get(this)),za["delete"](this),Aa["delete"](this)}}]),a}(),Ca=null,Da=function(a){function b(){var a;w(this,b);var c=u(this,Object.getPrototypeOf(b).call(this));return Ca||(Ca=c),a=Ca,u(c,a)}return v(b,a),c(b,[{key:"load",value:function(a){return this.has(a)||this.set(a,new wa(a)),this.get(a)}}]),b}(ya),Ea=new Da,Fa=function(){var a=new WeakMap,b=function(b,c){var d=b.getRefSize();return r(d,c.sizeRange.min,c.sizeRange.max)&&t(d,c,a.get(b))===c?(a.set(b,c),!0):!1};return b}(),Ga=new WeakMap,Ha=new WeakMap,Ia=new WeakMap,Ja=function(){function a(b,c){if(w(this,a),!(b instanceof Ba))throw new D("must be a Sprite Component");Ga.set(this,f(c)?c:z),Ia.set(this,b),Ha.set(this,new s),Object.defineProperties(this,{container:{get:function(){return Ga.get(this)}},sprite:{get:function(){return Ia.get(this)}}})}return c(a,[{key:"clone",value:function(){var b=new a(this.sprite,this.container);return b.sizeRange=this.sizeRange,b}},{key:"getIconByElement",value:function(a){if(this.container.contains(a)&&Ea.has(a)){var b=Ea.get(a);if(Fa(b,this))return b}return null}},{key:"findOne",value:function(a){var b=d("[data-icon='"+a+"']",this.container);return b?this.getIconByElement(b):null}},{key:"findMany",value:function(a){var b=[];e("[data-icon='"+a+"']",this.container).forEach(function(a){b.push(this.getIconByElement(a))},this)}},{key:"render",value:function(){e("*[data-icon]",this.container).forEach(function(a){var b=Ea.load(a);if(Fa(b,this)){var c=this.sprite.findPictogram(b.meta.get("icon"));b.draw(c)}},this)}},{key:"sizeRange",get:function(){return Ha.get(this)},set:function(a){var b=-1,c=-1;Array.isArray(a)?(b=a[0],c=a[1]):(b=a.min||-1,c=a.max||-1),Ha.set(this,new s(b,c))}}]),a}(),Ka={Icon:wa,Pictogram:oa,Sprite:Ba,Theme:Ja},La=function(a,b){return new Promise(function(c,d){try{var e=new Ka.Sprite(a),f=new Ka.Theme(e);c(f,b)}catch(g){d(g)}})},Ma=function(a,b){return b||(b={}),new Promise(function(c,d){try{!function(){var e=l(a);e.onsuccess=function(a){La(a,b.container).then(function(a){b.sizeRange&&(a.sizeRange=b.sizeRange),b.autorun&&a.render(),c(a)},function(a){d(a)})},e.onerror=d,b.headers&&b.headers.foreach(function(a,b){e.addHeader(a,b)}),e.send()}()}catch(e){d(e)}})},Na=function(a){return Ma(a,{autorun:!0})};a.components=Ka,a.autoload=Na,a.load=Ma,a.make=La});
//# sourceMappingURL=uxon-standalone.js.map