!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.uxon={})}(this,function(a){"use strict";function b(a){return a.indexOf("http")>=0&&a.indexOf(location.hostname)<0}function c(a){var b=null;if(window.DOMParser){var c=new DOMParser;b=c.parseFromString(a,t);var d=b.getElementsByTagName("parsererror");return d&&d.length&&d[0].childNodes.length||!(b.documentElement instanceof SVGElement)?null:b.documentElement}return b}function d(a){var c=b(a);if(!c||"withCredentials"in XMLHttpRequest.prototype)return new x(a,c);if("undefined"!=typeof XDomainRequest)return new z(a);throw new Error("[UxÃ´n] Too old browser")}function e(a,b){for(var c,d=a.attributes,e=d.length-1;e>-1;--e)c=d[e],c.nodeName.indexOf("aria-")>-1&&(b.setAttribute(c.nodeName,c.value),a.removeAttribute(c.nodeName))}function f(a,b){var c=H.push(new L(a,b));return b.set(I,--c),H[c]}function g(a,b){return"string"==typeof a?(b||document).querySelector(a):null}function h(a,b){return[].slice.call((b||document).querySelectorAll(a))}function i(a){return a===N?!1:N.contains(a)}function j(a,b){"classList"in a?a.classList.add(b):a.className.baseVal+=" "+b}function k(a,b){var c={};return a.id=b,h("symbol[id], g[id]",a).forEach(function(a){a.id=[b,a.id].join("-"),c[a.id]=new G(a)}),h("use",a).forEach(function(a){a.setAttributeNS(D.xlink,"href","#"+b+"-"+a.getAttributeNS(D.xlink,"href").slice(1))}),c}function l(a,b){var c=a.sizeRange,d=b.getRefSize();return(-1===c[0]||d>=c[0])&&(-1===c[1]||d<=c[1])}function m(a,b,c){if(!c)return b;var d=b.sizeRange,e=c.sizeRange,f=a.getRefSize(),g=n(f,(d[0]+d[1])/2),h=n(f,(e[0]+e[1])/2);return g===h?c.container.contains(b.container)?b:c:g>h?c:b}function n(a,b){return Math.max(a,b)-Math.min(a,b)}function o(a,b,c){c||(c=S),"string"==typeof a?a=d(a):a&&a.request||c(new TypeError("Invalid Request")),a.then(function(a){p(a,b,c)},function(a){c(a)}),a.send()}function p(a,b,c){var d,e=!1;b||(b=S,e=!0),c||(c=S);try{var f=new P(a);d=new R(f),b(d),e&&d.render()}catch(g){c(g)}}var q="Unable to access resource",r="Invalid SVG file format",s="GET",t="image/svg+xml",u=function(){},v=function(a){this.cors=!1,this.request=null,this.onRejected=u,this.onFulfilled=u,this.headers=[],this.url=encodeURI(a)},w=v.prototype={addHeader:function(a,b){var c=new Array(2);return c[0]=a+"",c[1]=b+"",this.headers.push(c),this},then:function(a,b){"function"==typeof a&&(this.onFulfilled=a),"function"==typeof b&&(this.onRejected=b)},send:function(){}},x=function(a,b){v.call(this,a),this.cors=!!b;var c=this.request=new XMLHttpRequest;c.open(s,this.url,!0)},y=x.prototype=Object.create(w);y.constructor=x,y.send=function(){var a=this.onRejected,b=this.onFulfilled,d=this.request;this.addHeader("Content-Type",t),"overrideMimeType"in d&&d.overrideMimeType(t),this.cors||this.addHeader("X-Requested-With","XMLHttpRequest"),this.headers.forEach(function(a){d.setRequestHeader(a[0],a[1])}),d.addEventListener("readystatechange",function(){if(4===this.readyState)if(200===this.status)try{var e=null;if(e=this.responseXML&&this.responseXML.documentElement&&"overrideMimeType"in d?this.responseXML.documentElement:c(this.responseText),!e)throw new TypeError(r);b(e)}catch(f){a(f)}else a(new Error(q))}),d.addEventListener("error",function(){a(new Error(q))}),d.addEventListener("timeout",function(){a(new Error(q))}),d.send()};var z=function(a){v.call(this,a);var b=this.request=new XDomainRequest;b.open(s,this.url)},A=z.prototype=Object.create(w);A.constructor=z,A.send=function(){var a=this.onRejected,b=this.onFulfilled,d=this.request;d.onload=function(){try{var e=c(d.responseText);if(!e)throw new TypeError(r);b(e)}catch(f){a(f)}},d.onerror=function(){a(q)},d.ontimeout=function(){a(new Error(q))},setTimeout(function(){d.send()},0)};var B=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},C=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),D={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},E="data-",F=function(){function a(b){B(this,a),this.element=b}return C(a,[{key:"has",value:function(a){return this.element.hasAttribute(E+a)}},{key:"get",value:function(a){return this.element.getAttribute(E+a)}},{key:"set",value:function(a,b){return this.element.setAttribute(E+a,b)}},{key:"remove",value:function(a){return this.element.removeAttribute(E+a)}}]),a}(),G=function(){function a(b){if(B(this,a),!(b instanceof SVGElement&&b.id))throw new Error("Invalid pictogram element");this.element=b;var c=this.title=b.getElementsByTagName("title").item(0),d=this.desc=b.getElementsByTagName("desc").item(0);c&&!c.id&&(c.id=b.id+"-title"),d&&!d.id&&(d.id=b.id+"-desc")}return C(a,[{key:"getIRI",value:function(){return"#"+this.element.id}},{key:"getViewBox",value:function(){var a=this.element;return a.viewBox.baseVal&&a.viewBox.baseVal.width>0?a.viewBox.baseVal:a.ownerSVGElement.viewBox.baseVal}}]),a}(),H=[],I="uxon-id",J=function(){var a=document.createElementNS(D.svg,"use");return a.setAttributeNS(D.xlink,"href","#empty"),a}(),K=function(){var a=document.createElementNS(D.svg,"svg");return a.className.baseVal="uxon uxon-icon",a.setAttribute("role","img"),a}(),L=function(){function a(b,c){if(B(this,a),!b.parentNode)throw new Error("Icon's element must have a parent node");this.connector=J.cloneNode(),this.element=b,this.meta=c;var d=this.shadow=K.cloneNode();e(b,d),b.setAttribute("aria-hidden","true"),d.appendChild(this.connector),this.element.parentNode.insertBefore(d,b.nextSibling)}return C(a,[{key:"draw",value:function(a){if(!(a instanceof G))throw new TypeError("Invalid pictogram");this.connector.setAttributeNS(D.xlink,"xlink:href","#"+a.element.id);var b=a.getViewBox();this.setViewBox(b.x,b.y,b.width,b.height),a.title&&!this.shadow.hasAttribute("aria-label")&&this.shadow.setAttribute("aria-labelledby",a.title.id),a.desc&&this.shadow.setAttribute("aria-describedby",a.desc.id),this.meta.has("rotate")&&this.rotate(this.meta.get("rotate")),this.meta.has("flip-x")&&this.flipX(),this.meta.has("flip-y")&&this.flipY(),this.meta.has("translate")&&this.translate(this.meta.get("translate").split(",")),this.meta.has("matrix")&&this.matrix(this.meta.get("matrix").split(","))}},{key:"addTransform",value:function(a,b){var c=this.connector,d=c.getAttribute("transform"),e=a+"("+b.join(",")+")";d?d+=" "+e:d=e,c.setAttribute("transform",d)}},{key:"clearTransform",value:function(){this.connector.removeAttribute("transform")}},{key:"flipX",value:function(a){var b=-1*this.getViewBox().width,c=0;this.addTransform("scale",[-1,1],a),this.addTransform("translate",[b,c],a)}},{key:"flipY",value:function(a){var b=0,c=-1*this.getViewBox().height;this.addTransform("scale",[1,-1],a),this.addTransform("translate",[b,c],a)}},{key:"rotate",value:function(a){var b=this.getViewBox();this.addTransform("rotate",[parseFloat(a),b.width/2,b.height/2])}},{key:"translate",value:function(a){var b=this.shadow.style,c=b.transform||b.msTransform||b.webkitTransform||b.oTransform||"";c&&(c+=" "),c+="translate("+a.join(",")+")",b.msTransform=c,b.oTransform=c,b.webkitTransform=c,b.transform=c}},{key:"getRefSize",value:function(){var a=this.getSize();return Math.max(a.height,a.width)}},{key:"getSize",value:function(){return this.shadow.getBoundingClientRect()}},{key:"getViewBox",value:function(){return this.shadow.viewBox.baseVal}},{key:"setViewBox",value:function(a,b,c,d){this.shadow.setAttribute("viewBox",[a,b,c,d].join(" "))}}]),a}(),M={has:function(a){if(a&&a.nodeType){var b=new F(a),c=b.get(I);return c&&H[c]}return!1},load:function(a){if(!a||!a.nodeType)throw new TypeError("Invalid element");var b=new F(a);if(b.has(I)){var c=b.get(I);return H[c]?H[c]:(b.remove(I),f(a,b))}return f(a,b)},remove:function(a){var b=new F(a);if(b.has(I)){var c=b.get(I),d=H[c];return b.remove(I),d.remove(),H[c]=null,!0}return!1}},N=document.body,O=0,P=function(){function a(b){if(B(this,a),!(b instanceof SVGElement))throw new TypeError("Invalid sprite element");b.setAttribute("aria-hidden",!0),b.removeAttribute("height"),b.removeAttribute("width"),j(b,"uxon"),j(b,"uxon-sprite"),i(b)||N.insertBefore(b,N.firstChild),this.element=b,this.pictograms=k(b,"uxon"+O++)}return C(a,[{key:"clone",value:function(){var b=this.element.cloneNode(!0),c=new a(b);return c.prefix(k),c}},{key:"has",value:function(a){return this.pictograms[a]&&this.pictograms[a]instanceof G}},{key:"find",value:function(a){var b=g("g[id$="+a+"], symbol[id$="+a+"]",this.element);return b?this.get(b.id):null}},{key:"get",value:function(a){return this.pictograms[a]||null}},{key:"remove",value:function(a){return this.has(a)?(this.pictograms[a].parentNode.removeChild(this.pictograms[a]),this.pictograms[a]=null,!0):!1}},{key:"update",value:function(){this.pictograms={},h("symbol[id], g[id]",this.element).forEach(function(a){this.pictograms[a.id]=new G(a)},this)}}]),a}(),Q=[],R=function(){function a(b){B(this,a),this.container=N,this.sizeRange=new Array(2),this.sprite=b,this.id=Q.push(this)-1,this.setSizeRange(-1,-1)}return C(a,[{key:"clone",value:function(){var b=new a(this.sprite);return b.setSizeRange(this.sizeRange[0],this.sizeRange[1]),b.setContainer(this.container),b}},{key:"forEachIcons",value:function(a,b){h("[data-icon][data-theme-id='"+this.id+"']",this.container).forEach(function(c){a.call(b,M.load(c))})}},{key:"getIconsByName",value:function(a){var b=[];return h("[data-icon='"+a+"'][data-theme-id='"+this.id+"']",this.container).forEach(function(a){b.push(M.load(a))}),b}},{key:"render",value:function(){var a,b,c;h("[data-icon]",this.container).forEach(function(d){a=M.load(d),c=this,l(this,a)&&(a.meta.has("theme-id")&&(c=m(this,Q[a.meta.get("theme-id")])),c===this&&(a.meta.set("theme-id",this.id),b=this.sprite.find(a.meta.get("icon")),b&&a.draw(b)))},this)}},{key:"setSizeRange",value:function(a,b){this.sizeRange[0]=0|a,this.sizeRange[1]=0|b}},{key:"setContainer",value:function(a){return a&&a.nodeType&&i(a)?(this.container=a,!0):!1}}]),a}(),S=function(){},T=M,U=d;a.icons=T,a.initLoader=U,a.load=o,a.make=p});