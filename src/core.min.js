/* Copyright (c) 2015 Thomas Girard (http://www.thomasgirard.fr/) - uxon v.1.0.0 - License: MIT */
!function(){"use strict";function a(a,b){return"string"==typeof a?(b||document).querySelector(a):null}function b(a,b){return[].slice.call((b||document).querySelectorAll(a))}function c(a){return a===e?!1:e.contains(a)}function d(a,b){"classList"in a?a.classList.add(b):a.className.baseVal+=" "+b}if(self.SVGElement){var e=document.body,f="http://www.w3.org/2000/svg",g="http://www.w3.org/1999/xlink",h=function(){},i=function(){var a="data-",b=function(a){this.element=a};return b.prototype={has:function(b){return this.element.hasAttribute(a+b)},get:function(b){return this.element.getAttribute(a+b)},set:function(b,c){return this.element.setAttribute(a+b,c)},remove:function(b){return this.element.removeAttribute(a+b)}},b}(),j=function(){function a(a){return a.indexOf("http")>=0&&a.indexOf(location.hostname)<0}function b(a){var b=null;if(window.DOMParser){var c=new DOMParser;b=c.parseFromString(a,f);var d=b.getElementsByTagName("parsererror");return d&&d.length&&d[0].childNodes.length||!(b.documentElement instanceof SVGElement)?null:b.documentElement}return b}var c="Unable to access resource",d="Invalid SVG file format",e="GET",f="image/svg+xml",g=function(a){this.cors=!1,this.request=null,this.onRejected=h,this.onFulfilled=h,this.headers=[],this.url=encodeURI(a)},i=g.prototype={addHeader:function(a,b){var c=new Array(2);return c[0]=a+"",c[1]=b+"",this.headers.push(c),this},then:function(a,b){"function"==typeof a&&(this.onFulfilled=a),"function"==typeof b&&(this.onRejected=b)},send:function(){}},j=function(a,b){g.call(this,a),this.cors=!!b;var c=this.request=new XMLHttpRequest;c.open(e,this.url,!0)},k=j.prototype=Object.create(i);k.constructor=j,k.send=function(){var a=this.onRejected,e=this.onFulfilled,g=this.request;this.addHeader("Content-Type",f),"overrideMimeType"in g&&g.overrideMimeType(f),this.cors||this.addHeader("X-Requested-With","XMLHttpRequest"),this.headers.forEach(function(a){g.setRequestHeader(a[0],a[1])}),g.addEventListener("readystatechange",function(){if(4===this.readyState)if(200===this.status)try{var f=null;if(f=this.responseXML&&this.responseXML.documentElement&&"overrideMimeType"in g?this.responseXML.documentElement:b(this.responseText),!f)throw new TypeError(d);e(f)}catch(h){a(h)}else a(new Error(c))}),g.addEventListener("error",function(){a(new Error(c))}),g.addEventListener("timeout",function(){a(new Error(c))}),g.send()};var l=function(a){g.call(this,a);var b=this.request=new XDomainRequest;b.open(e,this.url)},m=l.prototype=Object.create(i);m.constructor=l,m.send=function(){var a=this.onRejected,e=this.onFulfilled,f=this.request;f.onload=function(){try{var c=b(f.responseText);if(!c)throw new TypeError(d);e(c)}catch(g){a(g)}},f.onerror=function(){a(c)},f.ontimeout=function(){a(new Error(c))},setTimeout(function(){f.send()},0)};var n=function(b){var c=a(b);if(!c||"withCredentials"in XMLHttpRequest.prototype)return new j(b,c);if("undefined"!=typeof XDomainRequest)return new l(b);throw new Error("[UxÃ´n] Too old browser")};return n}(),k=function(){function f(a,c){var d={};return a.id=c,b("symbol[id], g[id]",a).forEach(function(a){a.id=[c,a.id].join("-"),d[a.id]=new l(a)}),b("use",a).forEach(function(a){a.setAttributeNS(g,"href","#"+c+"-"+a.getAttributeNS(g,"href").slice(1))}),d}var h=0,i=function(a){if(!(a instanceof SVGElement))throw new TypeError("Invalid sprite element");a.setAttribute("aria-hidden",!0),a.removeAttribute("height"),a.removeAttribute("width"),d(a,"uxon"),d(a,"uxon-sprite"),c(a)||e.insertBefore(a,e.firstChild),this.element=a,this.pictograms=f(a,"uxon"+h++)};return i.prototype={clone:function(a){var b=this.element.cloneNode(!0),c=new i(b);return c.prefix(a),c},has:function(a){return this.pictograms[a]&&this.pictograms[a]instanceof l},find:function(b){var c=a("g[id$="+b+"], symbol[id$="+b+"]",this.element);return c?this.get(c.id):null},get:function(a){return this.pictograms[a]||null},remove:function(a){return this.has(a)?(this.pictograms[a].parentNode.removeChild(this.pictograms[a]),this.pictograms[a]=null,!0):!1},update:function(){this.pictograms={},b("symbol[id], g[id]",this.element).forEach(function(a){this.pictograms[a.id]=new l(a)},this)}},i}(),l=function(a){if(!(a instanceof SVGElement&&a.id))throw new Error("Invalid pictogram element");this.element=a};l.prototype={getIRI:function(){return"#"+this.element.id},getViewBox:function(){var a=this.element;return a.viewBox.baseVal&&a.viewBox.baseVal.width>0?a.viewBox.baseVal:a.ownerSVGElement.viewBox.baseVal}};var m=function(){function a(a,d){var e=b.push(new h(a,d));return d.set(c,--e),b[e]}var b=[],c="uxon-id",d=function(){var a=document.createElementNS(f,"use");return a.setAttributeNS(g,"href","#empty"),a}(),e=function(){var a=document.createElementNS(f,"svg");return a.className.baseVal="uxon uxon-icon",a}(),h=function(a,b){if(!a.parentNode)throw new Error("Icon's element must have a parent node");this.connector=d.cloneNode(),this.element=a,this.meta=b;var c=this.shadow=e.cloneNode();c.appendChild(this.connector),this.element.parentNode.insertBefore(c,a.nextSibling)};return h.prototype={draw:function(a){if(!(a instanceof l))throw new TypeError("Invalid pictogram");this.connector.setAttributeNS(g,"xlink:href","#"+a.element.id);var b=a.getViewBox();this.setViewBox(b.x,b.y,b.width,b.height)},getRefSize:function(){var a=this.getSize();return Math.max(a.height,a.width)},getSize:function(){return this.shadow.getBoundingClientRect()},getViewBox:function(){return this.shadow.viewBox.baseVal},setViewBox:function(a,b,c,d){this.shadow.setAttribute("viewBox",[a,b,c,d].join(" "))}},{has:function(a){if(a&&a.nodeType){var d=new i(a),e=d.get(c);return e&&b[e]}return!1},load:function(d){if(!d||!d.nodeType)throw new TypeError("Invalid element");var e=new i(d);if(e.has(c)){var f=e.get(c);return b[f]?b[f]:(e.remove(c),a(d,e))}return a(d,e)},remove:function(a){var d=new i(a);if(d.has(c)){var e=d.get(c),f=b[e];return d.remove(c),f.remove(),b[e]=null,!0}return!1}}}(),n=function(){function a(a,b){var c=a.sizeRange,d=b.getRefSize();return(-1===c[0]||d>=c[0])&&(-1===c[1]||d<=c[1])}function d(a,b,c){if(!c)return b;var d=b.sizeRange,e=c.sizeRange,g=a.getRefSize(),h=f(g,(d[0]+d[1])/2),i=f(g,(e[0]+e[1])/2);return h===i?c.container.contains(b.container)?b:c:h>i?c:b}function f(a,b){return a>b?a-b:b-a}var g=[],h=function(a){this.container=e,this.sizeRange=new Array(2),this.sprite=a,this.id=g.push(this)-1,this.setSizeRange(-1,-1)};return h.prototype={clone:function(){var a=new h(this.sprite);return a.setSizeRange(this.sizeRange[0],this.sizeRange[1]),a.setContainer(this.container),a},forEachIcons:function(a,c){b('[data-icon][data-theme-id="'+this.id+'"]',this.container).forEach(function(b){a.call(c,m.load(b))})},getIconsByName:function(a){var c=[];return b('[data-icon="'+a+'"][data-theme-id="'+this.id+'"]',this.container).forEach(function(a){c.push(m.load(a))}),c},render:function(){var c,e,f;b("[data-icon]",this.container).forEach(function(b){c=m.load(b),f=this,a(this,c)&&(c.meta.has("theme-id")&&(theme=d(this,g[c.meta.get("theme-id")])),f===this&&(c.meta.set("theme-id",this.id),e=this.sprite.find(c.meta.get("icon")),e&&c.draw(e)))},this)},setSizeRange:function(a,b){this.sizeRange[0]=0|a,this.sizeRange[1]=0|b},setContainer:function(a){return a&&a.nodeType&&c(a)?(this.container=a,!0):!1}},h}(),o=self.uxon={icons:m,initLoader:j,load:function(a,b,c){c||(c=h),"string"==typeof a?a=j(a):a&&a.request||c(new TypeError("Invalid Request")),a.then(function(a){o.make(a,b,c)},function(a){c(a)}),a.send()},make:function(a,b,c){var d,e=!1;b||(b=h,e=!0),c||(c=h);try{var f=new k(a);d=new n(f),b(d),e&&d.render()}catch(g){c(g)}}}}}();
//# sourceMappingURL=core.min.js.map